!function(t,o){"object"==typeof exports&&"object"==typeof module?module.exports=o():"function"==typeof define&&define.amd?define([],o):"object"==typeof exports?exports.MA=o():t.MA=o()}(window,function(){return function(t){var o={};function n(e){if(o[e])return o[e].exports;var i=o[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=o,n.d=function(t,o,e){n.o(t,o)||Object.defineProperty(t,o,{enumerable:!0,get:e})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,o){if(1&o&&(t=n(t)),8&o)return t;if(4&o&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(n.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&o&&"string"!=typeof t)for(var i in t)n.d(e,i,function(o){return t[o]}.bind(null,i));return e},n.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(o,"a",o),o},n.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)},n.p="",n(n.s=0)}({0:function(t,o,n){"use strict";n.r(o),n.d(o,"JoyDialog",function(){return a});n(1),n(10);var e=function(t){var o=t.navigator.userAgent,n=/android|adr/gi.test(o),e=/iphone|ipod|ipad/gi.test(o)&&!n,i=/micromessenger|wechat/gi.test(o),s=/miniprogram/gi.test(o),a=/alipayclient/gi.test(o),l=n||e||i||s||a,c="ontouchend"in document;return{isIOS:e,isAndroid:n,isWXBrowser:i,isWXMiniApp:s,isAlipayclient:a,isMobile:l,platform:e?"ios":n?"android":i?"wxBrowser":s?"wxMiniApp":a?"alipayclient":"default",isSupportTouch:c,tapEvent:l&&c?"tapEvent":"click"}}(window);const i={type:"alert",style:"default",titleShow:!0,titleText:"提示",bodyNoScroll:!1,closeBtnShow:!1,content:"",contentScroll:!0,dialogClass:"",autoClose:0,overlayShow:!0,overlayClose:!1,buttonStyle:"side",buttonTextConfirm:"确定",buttonTextCancel:"取消",buttonClassConfirm:"",buttonClassCancel:"",buttons:[],infoIcon:"",infoIconColor:"",infoText:"",infoColor:"",infoBgColor:"",position:"center",onClickConfirmBtn:function(){},onClickCancelBtn:function(){},onBeforeShow:function(){},onShow:function(){},onBeforeClosed:function(){},onClosed:function(){}};function s(t){this.settings={},Object.assign(this.settings,i,t)}function a(t){return function(t){var o=new s(t);return o._init(),o.close=function(){o.closeDialog()},o}(t)}s.prototype={_init:function(){if(console.log("初始化弹窗"),clearTimeout(this.autoCloseTimer),this.isHided=!1,this.tapBug=this._hasTapBug(),this.platform=e.platform,this.dislogStyle="default"===this.settings.style?e.isMobile?"default":"pc":this.settings.style,0===$("#dialog-body-no-scroll").length){$("head").append('<style id="dialog-body-no-scroll">.body-no-scroll { position: absolute; overflow: hidden; width: 100%; }</style>')}this._renderDOM(),this._bindEvents()},_renderDOM:function(){this.settings.onBeforeShow(),this._createDialogDOM(this.settings.type),this.settings.onShow()},_bindEvents:function(){var t=this;function o(){var o=t.settings.onClickCancelBtn();(o||void 0===o)&&t.closeDialog()}t.$confirmBtn.on(e.tapEvent,function(o){var n=t.settings.onClickConfirmBtn();(n||void 0===n)&&t.closeDialog()}).on("touchend",function(t){t.preventDefault()}),t.$cancelBtn.on(e.tapEvent,function(t){o()}).on("touchend",function(t){t.preventDefault()}),t.$closeBtn.on(e.tapEvent,function(t){o()}).on("touchend",function(t){t.preventDefault()}),t.settings.overlayClose&&$(document).on(e.tapEvent,".dialog-overlay",function(t){o()}),t.settings.autoClose>0&&(console.log(t.settings.autoClose/1e3+"秒后, 自动关闭弹窗"),t._autoClose()),$(document).on("webkitAnimationEnd MSAnimationEnd animationend",".dialog-content",function(){t.isHided&&(t.removeDialog(),t.tapBug&&t._removeTapOverlayer())}),t.settings.buttons.length&&$.each(t.settings.buttons,function(o,n){t.$dialogContentFt.children("button").eq(o).on(e.tapEvent,function(o){o.preventDefault();var e=n.callback();(e||void 0===e)&&t.closeDialog()})}),$(window).on("onorientationchange"in window?"orientationchange":"resize",function(){t.settings.contentScroll&&setTimeout(function(){t._resetDialog()},200)}),$(document).on("touchmove",function(o){return!t.$dialog.find($(o.target)).length}),t.settings.contentScroll&&t._contentScrollEvent()},_createDialogDOM:function(t){switch(this.$dialog=$('<div class="jdialog dialog-open '+this.settings.dialogClass+'" data-style="'+this.dislogStyle+'"></div>'),this.$dialogOverlay=$('<div class="dialog-overlay"></div>'),this.$dialogContent=$('<div class="dialog-content"></div>'),this.$dialogTitle=$('<div class="dialog-content-hd"><h3 class="dialog-content-title">'+this.settings.titleText+"</h3></div>"),this.$dialogContentFt=$('<div class="dialog-content-ft"></div>'),this.$dialogContentBd=$('<div class="dialog-content-bd"></div>'),this.$closeBtn=$('<div class="dialog-btn-close"><span>close</span></div>'),this.$confirmBtn=$('<button class="dialog-btn dialog-btn-confirm '+this.settings.buttonClassConfirm+'">'+this.settings.buttonTextConfirm+"</button>"),this.$cancelBtn=$('<button class="dialog-btn dialog-btn-cancel '+this.settings.buttonClassCancel+'">'+this.settings.buttonTextCancel+"</button>"),t){case"alert":this._createDialogAlertTypeDOM(this,t);break;case"toast":case"toast_error":case"toast_warning":case"toast_info":case"toast_success":case"toast_question":case"toast_busy":case"toast_wind":case"loading":this._createDialogToastTypeDOM(this,t);break;case"notice":case"notice_error":case"notice_warning":case"notice_info":case"notice_success":this._createDialogNoticeTypeDOM(this,t);break;default:console.log("running default")}},_createDialogAlertTypeDOM(t,o){if(t.$dialog.addClass("dialog-modal"),t.settings.overlayShow&&t.$dialog.append(t.$dialogOverlay),t.settings.titleShow&&t.$dialogContent.append(t.$dialogTitle),t.settings.closeBtnShow&&t.$dialogTitle.append(t.$closeBtn),t.settings.buttons.length){var n="";$.each(t.settings.buttons,function(t,o){n+='<button class="dialog-btn '+o.class+'">'+o.name+"</button>"}),t.$dialogContentFt.append(n).addClass(t.settings.buttonStyle)}t.settings.buttonTextCancel&&t.$dialogContentFt.append(t.$cancelBtn).addClass(t.settings.buttonStyle),t.settings.buttonTextConfirm&&t.$dialogContentFt.append(t.$confirmBtn).addClass(t.settings.buttonStyle),t.$dialogContentBd.append(t.settings.content),t.$dialogContent.append(t.$dialogContentBd).append(t.$dialogContentFt),t.$dialog.append(t.$dialogContent),$("body").append(t.$dialog),t.settings.bodyNoScroll&&$("body").addClass("body-no-scroll"),t.settings.contentScroll&&t._setDialogContentHeight()},_createDialogToastTypeDOM(t,o){t.$dialog.addClass("dialog-toast"),t.settings.overlayShow&&t.$dialog.append(t.$dialogOverlay);var n="";if(t.settings.content)n=t.settings.content;else{var e="",i="#fff",s="rgba(0, 0, 0, 0.8);",a="fff";switch(o){case"toast_error":e="icon-failure_toast",i="#d81e06";break;case"toast_warning":e="icon-alert_toast",i="#f4ea2a";break;case"toast_info":e="icon-info",i="#1296db";break;case"toast_success":e="icon-success_toast",i="#58b20f";break;case"toast_question":e="icon-question",i="#13227a";break;case"toast_busy":e="icon-busy_toast",i="#d81e06";break;case"toast_wind":e="icon-windcontrol",i="#d81e06",console.info("wind");break;case"loading":e="icon-loading jdialog-loading-route-animation",i="#1296db",console.info("loading")}t.settings.infoColor&&(a=t.settings.infoColor),t.settings.infoBgColor&&(s=t.settings.infoBgColor),t.settings.infoIconColor&&(i=t.settings.infoIconColor),""!==e?n+='<div><i class="info-icon JDialog-icon '+e+'" style="color:'+i+';display: inline-block;"  ></i></div>':""!==t.settings.infoIcon&&(n+='<img class="info-icon" src="'+t.settings.infoIcon+'" />'),""!==t.settings.infoText&&(n+='<span class="info-text"  style="color:'+a+';">'+t.settings.infoText+"</span>")}var l=$(n);t.$dialogContentBd.append(l),t.$dialogContent.append(t.$dialogContentBd),t.$dialog.append(t.$dialogContent),t.$dialogContent.css("background-color",s),$("body").append(t.$dialog),t.settings.bodyNoScroll&&$("body").addClass("body-no-scroll")},_createDialogNoticeTypeDOM(t,o){t.$dialog.addClass("dialog-notice"),"bottom"===t.settings.position?t.$dialog.addClass("dialog-notice-bottom"):"top"===t.settings.position&&t.$dialog.addClass("dialog-notice-top"),t.settings.overlayShow&&t.$dialog.append(t.$dialogOverlay);var n="";if(t.settings.content)n=t.settings.content;else{var e="",i="#fff",s="rgba(0, 0, 0, 0.8);",a="fff";switch(o){case"notice_error":e="icon-failure_toast",i="#d81e06",a="#d81e06",s="rgba(255, 130, 106, 0.4);";break;case"notice_warning":e="icon-alert_toast",i="#DAA520",a="#DAA520",s="rgba(238,232,170, 0.4);";break;case"notice_info":e="icon-info",i="#4682B4",a="#4682B4",s="rgba(175,238,238, 0.4);";break;case"notice_success":e="icon-success_toast",i="#58b20f",a="#58b20f",s="rgba(148, 248, 85, 0.4);"}t.settings.infoColor&&(a=t.settings.infoColor),t.settings.infoBgColor&&(s=t.settings.infoBgColor),t.settings.infoIconColor&&(i=t.settings.infoIconColor),""!==e?n+='<i class="info-icon JDialog-icon '+e+'" style="color:'+i+';display: inline-block;"  ></i>':""!==t.settings.infoIcon&&(n+='<img class="info-icon" src="'+t.settings.infoIcon+'" />'),""!==t.settings.infoText&&(n+='<span class="info-text"  style="color:'+a+';">'+t.settings.infoText+"</span>")}var l=$(n);t.$dialogContentBd.append(l),t.$dialogContent.append(t.$dialogContentBd),t.$dialog.append(t.$dialogContent),t.$dialogContent.css("background-color",s),$("body").append(t.$dialog),t.settings.bodyNoScroll&&$("body").addClass("body-no-scroll")},_setDialogContentHeight:function(){var t=this;setTimeout(function(){var o=t.$dialogContentBd.height(),n=t._getDialogContentMaxHeight();t.$dialogContentBd.css({"max-height":n}).addClass("content-scroll"),o>n?t.$dialogContentFt.addClass("dialog-content-ft-border"):t.$dialogContentFt.removeClass("dialog-content-ft-border")},80)},_getDialogContentMaxHeight:function(){var t=$(window).height()-this.$dialogTitle.height()-this.$dialogContentFt.height()-60;return t=t%2==0?t:t-1},_resetDialog:function(){this._setDialogContentHeight()},_contentScrollEvent:function(){var t=!1,o={x:0,y:0,top:0,left:0};$(document).on("touchstart mousedown",".content-scroll",function(n){var e=n.changedTouches?n.changedTouches[0]:n;t=!0,o.x=e.clientX,o.y=e.clientY,o.top=$(this).scrollTop(),o.left=$(this).scrollLeft()}).on("touchmove mousemove",".content-scroll",function(n){var e=n.changedTouches?n.changedTouches[0]:n;if(!t)return!1;var i=o.top-(e.clientY-o.y),s=o.left-(e.clientX-o.x);$(this).scrollTop(i).scrollLeft(s)}).on("touchend mouseup",".content-scroll",function(o){o.preventDefault(),t=!1})},_autoClose:function(){var t=this;t.autoCloseTimer=setTimeout(function(){t.closeDialog()},t.settings.autoClose)},closeDialog:function(){this.isHided=!0,this.settings.onBeforeClosed(),this.$dialog.addClass("dialog-close").removeClass("dialog-open"),this.tapBug&&this._appendTapOverlayer()},removeDialog:function(){this.$dialogContent.html(""),this.$dialog.remove(),this.isHided=!1,this.settings.onClosed(),this.settings=i,this.settings.bodyNoScroll&&$("body").removeClass("body-no-scroll")},update:function(t){clearTimeout(this.autoCloseTimer),this.settings=Object.assign(i,t),""!==this.settings.content&&(this.$dialogContentBd.html(""),this.$dialogContentBd.append(this.settings.content));var o=this.$dialogContentBd.find(".info-icon"),n=this.$dialogContentBd.find(".info-text");o.attr({src:this.settings.infoIcon}),n.html(this.settings.infoText),this._bindEvents()},_hasTapBug:function(){return!1},_appendTapOverlayer:function(){this.$tapBugOverlayer=$(".solve-tap-bug"),this.$tapBugOverlayer.length||(this.$tapBugOverlayer=$('<div class="solve-tap-bug" style="margin:0;padding:0;border:0;background:rgba(0,0,0,0);-webkit-tap-highlight-color:rgba(0,0,0,0);width:100%;height:100%;position:fixed;top:0;left:0;"></div>'),$("body").append(this.$tapBugOverlayer))},_removeTapOverlayer:function(){var t=this;setTimeout(function(){t.$tapBugOverlayer.remove()},350)}},window.JoyDialog=a},1:function(t,o){},10:function(t,o){}})});